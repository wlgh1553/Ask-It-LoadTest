# Ask-It 부하 테스트

이 저장소는 [Ask-It](https://github.com/boostcampwm-2024/refactor-web07-Ask-It) 서비스의 안정성과 성능을 검증하기 위한 부하 테스트 프로젝트입니다.

## 테스트 도구 선정

Artillery를 메인 테스트 도구로 선택했습니다. 선정 이유는 다음과 같습니다:

1. **시나리오 기반 테스트**: YAML 파일을 통해 실제 사용자의 행동 패턴을 시나리오로 구현할 수 있습니다.
2. **WebSocket 지원**: Socket.IO를 기본 지원하여 실시간 채팅 기능 테스트가 가능합니다.
3. **확장성**: Custom JS 함수를 통해 복잡한 테스트 시나리오 구현이 가능합니다.
4. **상세한 리포팅**: 응답 시간, 처리량 등 다양한 메트릭을 자세히 분석할 수 있습니다.

부가적으로 Faker.js로 테스트 데이터를 생성하고, Axios로 HTTP 요청을 처리했습니다.

## 프로젝트 구조

```
.
├── api-scenario/          # API 부하 테스트
├── cache-scenario/        # 캐시 성능 테스트
├── chatting-scenario/     # WebSocket 채팅 테스트
└── package.json
```

## 테스트 시나리오 요약

### 1. API 부하 테스트

[상세 보고서](./api-scenario/README.md)

| 구분   | 내용                                                                              |
| ------ | --------------------------------------------------------------------------------- |
| 목표   | 200명 동시 접속 상황에서 API 안정성 검증                                          |
| 방법   | 질문/답변 작성, 조회, 좋아요 등 핵심 기능 시나리오 구성                           |
| 결과   | - 99.3% 요청 성공률<br>- 평균 응답시간 44.3ms<br>- 대부분의 API가 안정적으로 동작 |
| 개선점 | 좋아요 기능의 Race Condition 해결 필요                                            |

### 2. WebSocket 채팅 테스트

[상세 보고서](./chatting-scenario/README.md)

| 구분   | 내용                                                                    |
| ------ | ----------------------------------------------------------------------- |
| 목표   | 실시간 채팅 시스템의 확장성 검증                                        |
| 방법   | 점진적 사용자 증가 (최대 720명)                                         |
| 결과   | - 500명까지 안정적 성능<br>- 평균 세션 시간 13.85초<br>- 연결 실패율 0% |
| 개선점 | 600명 이상 처리를 위한 시스템 확장 계획 수립                            |

### 3. 캐시 성능 테스트

[상세 보고서](./cache-scenario/README.md)

| 구분 | 내용                                                                              |
| ---- | --------------------------------------------------------------------------------- |
| 목표 | 캐시 도입 효과 검증                                                               |
| 방법 | 캐시 적용 전후 성능 비교 (200명, 5분)                                             |
| 결과 | - 응답시간 80.7% 감소<br>- 처리량 18.3% 향상<br>- 특히 조회 작업에서 큰 성능 개선 |

## 테스트 실행

```bash
# 설치
npm install

# API 테스트 실행
npm run test:api

# 채팅 테스트 실행
npm run test:chatting
```

테스트 결과는 각 시나리오 디렉토리의 `results/` 폴더에서 확인할 수 있습니다.
